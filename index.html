<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cat√°logo de Productos</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.payphonetodoesposible.com/box/v1.1/payphone-payment-box.css"
    />
  </head>
  <body>
    <header class="topbar">
      <div class="container">
        <div class="brand">
          <span class="brand-icon" aria-hidden="true">üè™</span>
          <span class="brand-name">Tienda ULEAM</span>
        </div>
        <div class="nav-actions">
          <span class="cart-badge" id="cart-count">0</span>
          <span class="nav-cart" aria-label="Carrito">üõí</span>
        </div>
      </div>
    </header>

    <section class="hero">
      <h1>
        <span class="store-mark" aria-hidden="true">üõçÔ∏è</span> Cat√°logo de
        Productos
      </h1>
      <p class="subtitle">Integraci√≥n con PayPhone - Pr√°ctica examen de Plataformas ULEAM</p>
      <p class="subtitle">Paralelo "A"</p>
      <div class="info-banner">
        <span class="dot" aria-hidden="true"></span>
        <strong>Modo Prueba Activado</strong>
        <span class="muted">
          - Usa cualquier n√∫mero de tel√©fono para simular pagos</span
        >
      </div>
    </section>

    <main>
      <div id="product-list" class="product-container"></div>

      <div class="cart-container">
        <h2>üõí Carrito</h2>
        <ul id="cart" class="cart-list"></ul>

        <div id="cart-total-container">
          <p>Total: $<span id="cart-total">0.00</span></p>
        </div>

        <button id="pay-button" class="pay-button">Pagar Todo</button>

        <div id="pp-button"></div>
        <div id="payment-response" class="payment-response"></div>
      </div>
    </main>

    <script src="script.js"></script>
    <script src="https://cdn.payphonetodoesposible.com/box/v1.1/payphone-payment-box.js"></script>

    <script>
      // Escuchar clic en bot√≥n de "Pagar Todo"
      document.addEventListener("DOMContentLoaded", () => {
        // Esta parte se asegura que tu bot√≥n de pagar funcione incluso si script.js no se carga correctamente
        document.getElementById("pay-button").addEventListener("click", () => {
          const items = document.querySelectorAll("#cart li");
          if (items.length === 0) {
            const msg = document.getElementById("payment-response");
            msg.textContent =
              "El carrito est√° vac√≠o. Agrega productos antes de pagar.";
            msg.style.display = "block";
            msg.className = "payment-response info";
            setTimeout(() => {
              msg.style.display = "none";
            }, 4000);
            return;
          }

          let total = 0;
          items.forEach((item) => {
            const priceText = item.textContent.split("$")[1];
            total += parseFloat(priceText);
          });

          if (typeof initPaymentBox === "function") {
            initPaymentBox(total);
          } else {
            console.error("initPaymentBox no est√° disponible.");
          }
        });
      });
    </script>

    <footer style="background-color: #f4f4f4; padding: 20px; text-align: center; margin-top: 30px; border-top: 2px solid #ddd;">
        <h3 style="font-family: Arial, sans-serif; color: #333;">Equipo de Desarrollo</h3>
        <ul style="list-style-type: none; padding: 0;">
            <li style="margin: 5px 0; color: #555;">KEVIN JAIR PACHECO BERMEO</li>
            <li style="margin: 5px 0; color: #555;">MARIA FERNANDA RENDON CALDERON</li>
            <li style="margin: 5px 0; color: #555;">ADRIAN VICENTE SANTANA MACIAS</li>
            <li style="margin: 5px 0; color: #555;">FRANCISCO GUILLERMO VASQUEZ TOMALA</li>
            <li style="margin: 5px 0; color: #555;">OCTAVO A ISP</li>
        </ul>
    </footer>
  </body>
</html>